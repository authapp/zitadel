module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/src'],
  testMatch: ['**/__tests__/**/*.ts', '**/?(*.)+(spec|test).ts'],
  transform: {
    '^.+\\.ts$': 'ts-jest',
  },
  collectCoverageFrom: [
    'src/**/*.ts',
    '!src/**/*.d.ts',
    '!src/**/*.test.ts',
    '!src/**/*.spec.ts',
  ],
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],
  moduleNameMapper: {
    '^@/zerrors/(.*)$': '<rootDir>/src/lib/zerrors/$1',
    '^@/domain/(.*)$': '<rootDir>/src/lib/domain/$1',
    '^@/crypto/(.*)$': '<rootDir>/src/lib/crypto/$1',
    '^@/id/(.*)$': '<rootDir>/src/lib/id/$1',
    '^@/database/(.*)$': '<rootDir>/src/lib/database/$1',
    '^@/eventstore/(.*)$': '<rootDir>/src/lib/eventstore/$1',
    '^@/cache/(.*)$': '<rootDir>/src/lib/cache/$1',
    '^@/static/(.*)$': '<rootDir>/src/lib/static/$1',
    '^@/command/(.*)$': '<rootDir>/src/lib/command/$1',
    '^@/query/(.*)$': '<rootDir>/src/lib/query/$1',
    '^@/authz/(.*)$': '<rootDir>/src/lib/authz/$1',
    '^@/auth/(.*)$': '<rootDir>/src/lib/auth/$1',
    '^@/api/(.*)$': '<rootDir>/src/lib/api/$1',
    '^@/notification/(.*)$': '<rootDir>/src/lib/notification/$1',
    '^@/actions/(.*)$': '<rootDir>/src/lib/actions/$1',
    '^@/i18n/(.*)$': '<rootDir>/src/lib/i18n/$1',
    '^@/config/(.*)$': '<rootDir>/src/lib/config/$1',
    '^@/telemetry/(.*)$': '<rootDir>/src/lib/telemetry/$1',
  },
};
